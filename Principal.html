<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página Principal</title>
</head>

<style>
    body {
        box-sizing: border-box;
        height: 100vh;
        overflow: hidden;
        padding: 1em 5%;
        margin: 0;
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        font-family: Arial, Helvetica, sans-serif;
    }

    .title {
        display: inline;
    }

    hr {
        margin-bottom: 1em;
        width: 100%;
    }

    header {
        position: absolute;
        top: 30px;
        right: 0px;
        left: 240px;
    }

    .header-add {
        display: inline;
        width: 100%;
        background-color: aqua;
    }

    h1 {
        color: steelblue;
        margin-left: 20px;
    }

    .containerL {
        display: block;
    }

    .containerR,
    .containerL {
        width: 35%;
        height: auto;
        display: flex;
        flex-direction: column;
        background-color: whitesmoke;
        padding: 5em;
        flex-flow: wrap;
        border-radius: 0.3em;
        justify-content: center;
        align-items: center;
    }

    .containerR,
    .containerRegUser,
    .containerPrincipal {
        display: none;
    }

    .btn {
        border: solid 1px transparent;
        float: right;
        border-radius: 0.3em;
        box-shadow: none;
        padding: 0.9em;
        margin-top: 1em;
        margin-left: 1em;
        opacity: 0.9;
        text-transform: uppercase;
    }

    .containerT {
        width: 100%;
        margin-top: 20px;
    }

    .container-cuentas {
        padding: 0;
        left: 25%;
        position: absolute;
        display: none;
        width: 40%;
    }

    .container-tarjetas {
        padding: 0;
        left: 25%;
        display: none;
        position: absolute;
        width: 40%;
    }

    .container-table {
        padding: 0;
        height: 100%;
        position: absolute;
        right: 15%;
        width: 80%;
    }

    table {
        margin-top: 200px;
        border-collapse: collapse;
        width: 100%;
    }

    td,
    th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }

    tr:nth-child(even) {
        background-color: #dddddd;
    }

    input {
        width: 100%;
        padding: 12px 20px;
        margin: 15px 0;
        display: inline-block;
        border: 1px solid #ccc;
        box-sizing: border-box;
    }

    .small-input {
        display: flex;
        flex-flow: row wrap;
        justify-content: space-between;
    }

    .accept {
        background: steelblue;
        color: white;
    }

    .normal {
        background-color: silver;
    }

    .radio-buttons input {
        position: absolute;
        float: left;
        width: 25%;
        margin: 0;
        padding: 0;
    }

    .sidenav {
        position: absolute;
        height: 100%;
        width: 240px;
        top: 0;
        left: 0;
        background-color: steelblue;
        padding-top: 1em;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .sidenav a {
        padding: 100px 15px 6px 16px;
        text-decoration: none;
        font-size: 25px;
        color: #f1f1f1;
        align-self: center;
        text-align: center;
    }

    .sidenav a:hover {
        color: #504e4e;
    }

    .side-container {
        position: absolute;
        height: 100%;
        top: 115px;
        left: 240px;
        right: 0;
        bottom: 40px;
        width: 100%;
        overflow-y: auto;

        display: flex;
        justify-content: center;
        align-items: center;
    }

    @media screen and (min-width: 1280px) {

        .containerR,
        .containerRegUser,
        .containerPrincipal,
        .container-cuentas,
        .container-tarjetas,
        .container-tableA,
        .container-tableC {
            display: none;
        }

        .containerR,
        .containerRegUser,
        .containerL {
            width: 50%;
            font-size: 10px;

        }


        input#numCard,
        input#nameCard1,
        input#expDate,
        input#type,
        input#balance,
        input#state,
        input#cvv {
            margin-bottom: 7px;
            margin-top: 7px;
            padding: 6px;
            height: 60%;
        }

        input[type="tel"] {
            width: 200px;
        }

        input[type="radio"] {
            left: 50px;
        }


        .sidenav {
            width: 200px;
        }

        .sidenav a {
            text-align: center;
        }

        .side-container,
        .side-containerUser {
            left: 180px;
            height: 87.1%;
            overflow: hidden;

        }

        header {
            margin-left: 0;
            left: 200px;
        }

        table {
            width: 93%;
        }

        hr {
            width: 90%;
            margin-left: 0;
        }

        .header-add .btn.accept {
            margin-right: 61px;
        }

        .container-tarjetas {
            margin-top: -10px;
        }

        .containerT {
            font-size: 10px;
        }


        .btn.accept,
        .btn.normal {
            margin-top: 0;
        }
    }



    @media screen and (min-width: 1024px) and (max-width: 1280px) {

        .containerR,
        .containerRegUser,
        .containerPrincipal,
        .container-cuentas,
        .container-tarjetas,
        .container-tableA,
        .container-tableC {
            display: none;
        }

        .containerR,
        .containerRegUser,
        .containerL {
            width: 55%;
            font-size: 0px;

        }

        input#numCard,
        input#name,
        input#nameCard1,
        input#expDate,
        input#type,
        input#balance,
        input#state,
        input#cvv {
            margin-bottom: 7px;
            margin-top: 7px;
            padding: 6px;
            height: 60%;
        }

        input {
            width: 50%;
        }

        input[type="tel"] {
            width: 200px;

        }

        input[type="radio"] {
            left: 50px;
        }

        .sidenav {
            width: 200px;
        }

        .sidenav a {
            text-align: center;
        }

        .side-container {
            left: 180px;
            height: 87.1%;
            overflow: hidden;

        }

        header {
            margin-left: 0;
            left: 200px;
        }

        table {
            width: 93%;
        }

        hr {
            width: 90%;
            margin-left: 0;
        }

        .header-add .btn.accept {
            margin-right: 61px;
        }

        .container-tarjetas {
            font-size: 10px;
            margin-top: -10px;
        }


        .btn.accept,
        .btn.normal {
            margin-top: 0;
        }

    }

    @media screen and (min-width: 768px) and (max-width: 1024px) {

        .containerR,
        .containerRegUser,
        .containerPrincipal,
        .container-cuentas,
        .container-tarjetas,
        .container-tableA,
        .container-tableC {
            display: none;
        }

        .containerR,
        .containerRegUser,
        .containerL {
            width: 55%;

        }

        input#numCard,
        input#name,
        input#expDate,
        input#type,
        input#balance,
        input#state,
        input#cvv {
            margin-bottom: 7px;
            margin-top: 7px;
            padding: 6px;
            height: 60%;
        }

        input[type="tel"] {
            width: 150px;
        }

        input[type="radio"] {
            left: 50px;
        }


        .sidenav {
            width: 150px;
        }

        .sidenav a {
            text-align: center;
        }

        .side-container {
            position: absolute;
            left: 145px;

        }

        header {
            margin-left: 0;
            left: 200px;
        }

        table {
            width: 90%;
        }

        hr {
            width: 90%;
            margin-left: 0;

        }

        .header-add .btn.accept {
            margin-right: 80px;
        }

        .container-tarjetas {
            margin-top: -10px;
        }


        .btn.accept,
        .btn.normal {
            margin-top: 0;
        }

    }
</style>

<body style="background-color: whitesmoke;">

    <div class="containerLogin" id="containerLogin">

        <h2 class="title">Iniciar Sesión</h2>
        <hr>

        <form id="form" action="" method="post">

            <div class="containerT">
                <label> Usuario </label>
                <input type="text" id="username" placeholder="Nombre de usuario" name="username" required>

                <label> Contraseña </label>
                <input type="password" id="password" placeholder="Ingresar contraseña" name="passw" required>
            </div>

            <button type="submit" id="login" class="btn accept"> Iniciar Sesión</button>
            <button type="button" id="toRegister" class="btn normal"> Registrarse</button>
        </form>

    </div>

    <div class="containerRegUser" id="containerRegUser" display="none">

        <h2 class="title"> Registrarse Usuario</h2>
        <hr>

        <form id="register" action="" method="post">

            <div class="container-principal">
                <label> Nombre </label>
                <input type="text" id="name" placeholder="Escribe tu nombre" name="name" required>

                <label> Correo </label>
                <input type="text" id="email" placeholder="Escribe tu correo electrónico" name="email" required>

                <label> Usuario </label>
                <input type="text" id="user" placeholder="Escribe un nombre de usuario" name="username" required>

                <label> Contraseña </label>
                <input type="password" id="pass" placeholder="Ingresar contraseña" name="passw" required>

                <label> Confirmar contraseña </label>
                <input type="password" id="passRe" placeholder="Confirmar contraseña" required>

            </div>

            <button type="submit" class="btn accept"> Registrarse</button>
            <button type="button" id="toLogin" class="btn normal"> Iniciar Sesión</button>
        </form>

    </div>

    <div class="containerPrincipal" id="containerPrincipal" display="none">

        <header>
            <h1 id="welcome">Bienvenido @NombreUsuario</h1>
            <hr>
        </header>

        <div class="sidenav">
            <a id="sideClients" href="#Clientes">Clientes</a>
            <a id="sideAccount" href="#Cuentas">Cuentas Bancarias </a>
            <a id="sideCard" href="#Tarjeta">Tarjetas de Crédito</a>
            <a id="logout">Cerrar Sesión</a>
        </div>


        <div class="side-container">
            <div id="cuentas" class="container-cuentas">
                <h2 class="title"> Ingresar Cuenta Bancaria</h2>
                <form action="" id="cuentasC" method="post">

                    <div class="containerT">
                        <label> Número de cuenta </label>
                        <input type="text" placeholder="Escribe número de cuenta" id="numAccount" name="num-account"
                            required>

                        <label> Tipo de cuenta </label>
                        <input type="text" placeholder="Ex. Cuenta de ahorro" id="typeAccount" name="type-account"
                            required>

                        <label> Saldo </label>
                        <input type="number" step=".01" name="currency-field" id="balanceAccount" value=""
                            data-type="currency" placeholder="$1,000,000.00" required>

                        <label> Estado </label>
                        <div class="radio-buttons">
                            <br>
                            <input type="radio" id="stateAccount1" name="status1">
                            <label for="activo" style="margin-left: 15px;"> Activo</label><br><br>
                            <input type="radio" id="stateAccount2" name="status1">
                            <label for="inactivo" style="margin-left: 15px;">Inactivo</label>
                        </div>

                    </div>

                    <button type="submit" class="btn accept" id="saveAccount1"> Guardar</button>
                    <button type="button" class="btn normal " id="cancelAccount1"> Cancelar</button>
                </form>
            </div>

            <div id="tarjetas" class="container-tarjetas">
                <h2 class="title"> Ingresar Tarjeta</h2>
                <form action="" id="tarjetasC" method="post">

                    <div class="containerT">
                        <label> Número de Tarjeta </label>
                        <input type="text" placeholder="Escribe número de tarjeta" id="numCard" name="num-card"
                            required>

                        <label> Nombre en Tarjeta </label>
                        <input type="text" placeholder="Escribe el nombre dentro de la tarjeta" id="nameCard1"
                            name="name-card" required>

                        <label> Saldo </label>
                        <input type="number" name="currency-field" step=".01" id="balance" value="" data-type="currency"
                            placeholder="$1,000,000.00" required>

                        <label> Tipo de Tarjeta </label>
                        <input type="text" placeholder="Digita el tipo de tarjeta" id="type" name="type-card" required>

                        <label> Fecha de vencimiento </label>
                        <input type="date" id="expDate" min="2020-01-01" max="2025-12-31" required>

                        <label> cvv </label>
                        <input type="text" placeholder="Digita el cvv" name="type-cvv" id="cvv" required>

                        <label> Estado </label>
                        <div class="radio-buttons">
                            <br>
                            <input type="radio" name="status2" value="true">
                            <label for="activo" style="margin-left: 15px;"> Activo</label><br><br>
                            <input type="radio" name="status2" value="false">
                            <label for="inactivo" style="margin-left: 15px;">Inactivo</label>
                        </div>

                    </div>

                    <button type="submit" class="btn accept" id="saveCard1"> Guardar</button>
                    <button type="button" class="btn normal" id="cancelCard1"> Cancelar</button>
                </form>
            </div>

            <!--GUARDAR NUEVO CLIENTE-->
            <div class="containerR" id="containerR" display="none">

                <h2 class="title"> Registrarse Cliente</h2>
                <hr>

                <form id="register-client" method="post">

                    <div class="container-principal">
                        <label> Nombre </label>
                        <input type="text" id="nameClient" placeholder="Escribe tu nombre" name="name" required>

                        <label> Correo </label>
                        <input type="text" id="emailClient" placeholder="Escribe tu correo electrónico" name="email"
                            required>

                        <div class="small-input">

                            <label> DUI </label>
                            <input type="text" id="duiClient" placeholder="Digita tu número de DUI" name="dui" required>

                            <label> Teléfono </label>
                            <input type="text" id="telClient" placeholder="2222-9999" name="phone"
                                pattern="[0-9]{4}-[0-9]{4}" required>

                        </div>
                    </div>

                    <button type="submit" class="btn accept"> Guardar</button>
                    <button type="button" class="btn normal">Cancelar</button>
                </form>

            </div>



            <!--ESTE ES EL QUE ME INTERESA-->
            <div id="Principal" class="container-table">
                <div class="small-input">
                    <div>
                        <input type="text" id="searchDui" placeholder="Ingrese un DUI" name="dui" required>
                    </div>
                    <div>
                        <button type="button" id="addClient" class="btn normal">Agregar nuevo cliente</button>
                        <button type="submit" id="searchClient" class="btn accept">Buscar cliente</button>
                    </div>
                </div>
                <table id="table-clients">
                </table>
            </div>

            <div id="showAccounts" class="container-tableA">
                <h2 class="title"> Cuentas</h2>
                <div class="header-add">
                    <button type="button" id="addCount" class="btn accept"> Agregar Nueva Cuenta</button>
                </div>

                <table id="table-accounts">
                </table>
            </div>

            <div id="showCards" class="container-tableC">
                <h2 class="title"> Tarjetas</h2>
                <div class="header-add">
                    <button type="button" id="addCard" class="btn accept"> Agregar Nueva Tarjeta</button>
                </div>

                <table id="table-cards">
                </table>
            </div>


            <div id="updateCard" class="container-tarjetas">
                <h2 class="title"> Actualizar Tarjetas</h2>
                <form action="" id="updateC" method="post">

                    <div class="containerT">
                        <label> Número de Tarjeta </label>
                        <input type="text" placeholder="Escribe número de tarjeta" id="numUpCard" name="num-card"
                            required>

                        <label> Nombre en Tarjeta </label>
                        <input type="text" placeholder="Escribe el nombre dentro de la tarjeta" id="nameCard2"
                            name="name-card" required>

                        <label> Saldo </label>
                        <input type="text" name="currency-field" id="balanceUpCard" pattern="^\d{1,3}(,\d{3})*(\.\d+)?$"
                            value="" data-type="currency" placeholder="$1,000,000.00" required>

                        <label> Tipo de Tarjeta </label>
                        <input type="text" placeholder="Digita el tipo de tarjeta" id="typeUpCard" name="type-card"
                            required>

                        <label> Fecha de vencimiento </label>
                        <input type="date" placeholder="Digita el tipo de tarjeta" id="expDateUpCard" min="2020-01-01"
                            max="2021-12-31">

                        <label> cvv </label>
                        <input type="text" placeholder="Digita el cvv" name="type-cvv" id="cvvUpCard" required>

                        <label> Estado </label>
                        <div class="radio-buttons">
                            <br>
                            <input type="radio" id="stateUpCard1" name="status" value="active">
                            <label for="activo" style="margin-left: 15px;"> Activo</label><br><br>
                            <input type="radio" id="stateUpCard2" name="status" value="no-active">
                            <label for="inactivo" style="margin-left: 15px;">Inactivo</label>
                        </div>

                    </div>

                    <button type="submit" class="btn accept" id="saveUpCard2"> Guardar</button>
                    <button type="button" class="btn normal" id="cancelCard2"> Cancelar</button>
                </form>
            </div>

            <div id="accountUp" class="container-cuentas">
                <h2 class="title"> Actualiza Cuenta Bancaria</h2>
                <form action="" id="accountUp" method="post">

                    <div class="containerT">
                        <label> Número de cuenta </label>
                        <input type="text" placeholder="Escribe úmero de cuenta" id="numUpAccount" name="num-account"
                            required>

                        <label> Tipo de cuenta </label>
                        <input type="text" placeholder="Ex. Cuenta de ahorro" id="typeUpAccount" name="type-account"
                            required>

                        <label> Saldo </label>
                        <input type="text" name="currency-field" id="balanceUpAccount"
                            pattern="^\$\d{1,3}(,\d{3})*(\.\d+)?$" value="" data-type="currency"
                            placeholder="$1,000,000.00" required>

                        <label> Estado </label>
                        <div class="radio-buttons">
                            <br>
                            <input type="radio" id="stateUpAccount1" name="status" value="active">
                            <label for="activo" style="margin-left: 15px;"> Activo</label><br><br>
                            <input type="radio" id="stateUpAccount2" name="status" value="no-active">
                            <label for="inactivo" style="margin-left: 15px;">Inactivo</label>
                        </div>
                    </div>

                    <button type="submit" class="btn accept" id="saveUpAccount2"> Guardar</button>
                    <button type="button" class="btn normal " id="cancelAccount2"> Cancelar</button>
                </form>
            </div>

        </div>
    </div>



    <script>
        window.onload = function () {

            function ocultarAgregarCyT() {
                document.getElementById('cuentas').style.display = "none";
                document.getElementById('tarjetas').style.display = "none";
            }

            function ocultarmostrarPyT() {
                document.getElementById('Principal').style.display = "none"
                document.getElementById('showCards').style.display = "none"
                document.getElementById('tarjetas').style.display = "none"
                document.getElementById('showAccounts').style.display = "none"
            }

            function ocultarmostrarPyC() {
                document.getElementById('Principal').style.display = "none"
                document.getElementById('showCards').style.display = "none"
                document.getElementById('cuentas').style.display = "none"
                document.getElementById('showAccounts').style.display = "none"

            }

            function ocultarPyTarjetas() {
                document.getElementById('Principal').style.display = "none"
                document.getElementById('showCards').style.display = "none"
                document.getElementById('cuentas').style.display = "none"
                document.getElementById('tarjetas').style.display = "none"
            }
            function ocultarPyCuentas() {
                document.getElementById('Principal').style.display = "none"
                document.getElementById('showAccounts').style.display = "none"
                document.getElementById('cuentas').style.display = "none"
                document.getElementById('tarjetas').style.display = "none"
            }

            function ocultarMostrarCyT() {
                document.getElementById('showAccounts').style.display = "none"
                document.getElementById('showCards').style.display = "none"
                document.getElementById('cuentas').style.display = "none"
                document.getElementById('tarjetas').style.display = "none"
            }

            function ocultarUpAyC() {
                document.getElementById('accountUp').style.display = "none";
                document.getElementById('updateCard').style.display = "none";
            }


            function cargarClientes() {

                let duiClient =

                    fetch(`${url}allClients`, {
                        method: 'GET',
                        headers: {
                            'Content-type': 'text/plain',
                            Accept: 'application/json'
                        }
                    })
                        .then(response => response.json())
                        .then(data => {
                            console.log(data);
                            let table = document.getElementById('table-clients');
                            let html = `
                            <tr>
                                <th>DUI</th>
                                <th>Nombre</th>
                                <th>Telefono</th>
                                <th>Correo</th>
                            </tr>
                            `;
                            data.forEach(obj => {
                                let state = (obj.state ? "Activo" : "Inactivo");
                                html += `
                            <tr>
                                <td>${obj.dui}</td>
                                <td>${obj.name}</td>
                                <td>${obj.phone}</td>
                                <td>${obj.email}</td>
                            </tr>
                            `;
                            });

                            //Asignar elementos a la tabla
                            table.innerHTML = html;

                        })
                        .catch(err => console.log(err))
            }


            function mostrarP() {
                cargarClientes();
                ocultarAgregarCyT();
                ocultarMostrarCyT();
                ocultarUpAyC();
                document.getElementById('containerR').style.display = "none";
                document.getElementById('Principal').style.display = "block";
            }

            function mostrarR() {
                ocultarPyCuentas();
                document.getElementById('containerR').style.display = "block";
            }

            function showCardUp() {
                ocultarPyCuentas();
                ocultarmostrarPyC();
                document.getElementById('containerR').style.display = "none";
                document.getElementById('updateCard').style.display = "block";
            }

            function showAccountUp() {
                ocultarPyTarjetas();
                ocultarmostrarPyT();
                document.getElementById('containerR').style.display = "none";
                document.getElementById('accountUp').style.display = "block";
            }


            function agregarCuentas() {
                ocultarmostrarPyT()
                ocultarUpAyC();
                document.getElementById('containerR').style.display = "none";
                document.getElementById('cuentas').style.display = "block";
            }
            function agregarTarjetas() {
                ocultarmostrarPyC();
                ocultarUpAyC();
                document.getElementById('containerR').style.display = "none";
                document.getElementById('tarjetas').style.display = "block";
            }

            function cargarCuentas() {

                let idUser = JSON.parse(window.sessionStorage.getItem('user')).id;

                fetch(`${url}allAccounts?client=${idUser}`, {
                    method: 'GET',
                    headers: {
                        'Content-type': 'text/plain',
                        Accept: 'application/json'
                    }
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                        let table = document.getElementById('table-accounts');
                        let html = `
                        <tr>
                            <th>Numero</th>
                            <th>Tipo</th>
                            <th>Estado</th>
                        </tr>
                        `;
                        data.forEach(obj => {
                            let state = (obj.state ? "Activo" : "Inactivo");
                            html += `
                            <tr>
                                <td>${obj.numAccount}</td>
                                <td>${obj.type}</td>
                                <td>${obj.balance}</td>
                                <td>${state}</td>
                            </tr>
                            `;
                        });

                        //Asignar elementos a la tabla
                        table.innerHTML = html;

                    })
                    .catch(err => console.log(err))
            }


            function mostrarCuentas() {
                cargarCuentas();
                ocultarPyTarjetas()
                ocultarUpAyC();
                document.getElementById('showAccounts').style.display = "block"
            }

            function cargarTarjetas() {

                let idUser = JSON.parse(window.sessionStorage.getItem('user')).id;

                fetch(`${url}allCards?client=${idUser}`, {
                    method: 'GET',
                    headers: {
                        'Content-type': 'text/plain',
                        Accept: 'application/json'
                    }
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                        let table = document.getElementById('table-cards');
                        let html = `
                        <tr>
                            <th>Numero</th>
                            <th>Tipo</th>
                            <th>Saldo</th>
                            <th>Vencimiento</th>
                            <th>Estado</th>
                        </tr>
                        `;
                        data.forEach(obj => {
                            let state = (obj.state ? "Activo" : "Inactivo");
                            html += `
                            <tr>
                                <td>${obj.numCard}</td>
                                <td>${obj.type}</td>
                                <td>${obj.balance}</td>
                                <td>${obj.expDate}</td>
                                <td>${state}</td>
                            </tr>
                            `;
                        });

                        //Asignar elementos a la tabla
                        table.innerHTML = html;

                    })
                    .catch(err => console.log(err))
            }

            function mostrarTarjetas() {
                cargarTarjetas();
                ocultarUpAyC();
                ocultarPyCuentas();
                document.getElementById('showCards').style.display = "block";
            }
            function ocultarContainerLyR() {
                document.getElementById('containerLogin').style.display = "none";
                document.getElementById('containerRegUser').style.display = "none";
            }

            function ocultarContainerRyP() {
                document.getElementById('containerRegUser').style.display = "none";
                document.getElementById('containerPrincipal').style.display = "none";
            }

            function ocultarContainerPyL() {
                document.getElementById('containerPrincipal').style.display = "none";
                document.getElementById('containerLogin').style.display = "none"
            }

            function mostrarContainerL() {
                ocultarContainerRyP();
                document.getElementById('containerLogin').style.display = "block"
            }

            function mostrarContainerP() {
                ocultarContainerLyR();
                document.getElementById('containerPrincipal').style.display = "block"
            }

            function mostrarContainerReg() {
                ocultarContainerPyL();
                document.getElementById('containerRegUser').style.display = "block"
            }

            const url = `http://localhost:3000/`;
            const toRegister = document.getElementById('toRegister').addEventListener('click', (e) => mostrarContainerReg());
            const toLogin = document.getElementById('toLogin').addEventListener('click', (e) => mostrarContainerL());
            const addCard = document.getElementById('addCard').addEventListener('click', (e) => agregarTarjetas());
            const addCount = document.getElementById('addCount').addEventListener('click', (e) => agregarCuentas());
            const sideClients = document.getElementById('sideClients').addEventListener('click', (e) => mostrarP());
            const sideAccount = document.getElementById('sideAccount').addEventListener('click', (e) => agregarCuentas());
            const sideCard = document.getElementById('sideCard').addEventListener('click', (e) => agregarTarjetas());
            const logout = document.getElementById('logout').addEventListener('click', (e) => mostrarContainerL());
            const cancelCard1 = document.getElementById('cancelCard1').addEventListener('click', (e) => mostrarTarjetas());
            const cancelAccount1 = document.getElementById('cancelAccount1').addEventListener('click', (e) => mostrarCuentas());
            const registerClient = document.getElementById('addClient').addEventListener('click', (e) => mostrarR());

            var saveClient = document.getElementById('register-client');

            saveClient.addEventListener('button', (e) =>{
                e.preventDefault();
                mostrarP();
            });


            saveClient.addEventListener('submit', (e)=>{
                e.preventDefault();

                let name = document.getElementById('nameClient').value
                let email = document.getElementById('emailClient').value
                let phone = document.getElementById('telClient').value
                let dui = document.getElementById('duiClient').value

                
                    fetch(`${url}addClient`, {
                        method: 'POST',
                        body: JSON.stringify({
                            phone: phone,
                            name: name,
                            email: email,
                            dui: dui
                        }),
                        headers: {
                            'Content-type': 'text/plain',
                            Accept: 'application/json'
                        }
                    })
                        .then(()=>{
                            mostrarP();
                        })
                        .catch(err => console.log(err))

            })

            //register
            var register = document.getElementById('register');


            register.addEventListener('button', (e) => {
                e.preventDefault();
                mostrarContainerL();
            });

            register.addEventListener('submit', (e) => {

                e.preventDefault();

                console.log("entro");

                let name = document.getElementById('name').value
                let email = document.getElementById('email').value
                let username = document.getElementById('user').value
                let password = document.getElementById('pass').value
                let confirmPass = document.getElementById('passRe').value

                if (password === confirmPass) {
                    fetch(`${url}register`, {
                        method: 'POST',
                        body: JSON.stringify({
                            username: username,
                            name: name,
                            email: email,
                            password: password
                        }),
                        headers: {
                            'Content-type': 'text/plain',
                            Accept: 'application/json'
                        }
                    })
                        .then(response => response.json())
                        .then(data => {

                        })
                        .catch(err => console.log(err))
                } else {
                    alert("Las contraseñas no coinciden");
                }

            })

            //login
            var form = document.getElementById('form')

            form.addEventListener('submit', (e) => {

                e.preventDefault();

                var username = document.getElementById('username').value
                var password = document.getElementById('password').value

                //De momento dejalo sin el body
                fetch(`${url}login`, {
                    method: 'POST',
                    body: JSON.stringify({ username: username, password: password }),
                    headers: {
                        'Content-Type': 'text/plain',
                        Accept: 'application/json'
                    }
                })
                    .then(response => {
                        return response.json()
                    })
                    .then(data => {
                        console.log(data);
                        window.sessionStorage.setItem('user', JSON.stringify({ name: data.name, id: data._id }))
                        document.getElementById('welcome').textContent = `Welcome ${data.name}`
                        ocultarContainerLyR();
                        mostrarContainerP();
                        mostrarP();
                    })
                    .catch(err => console.log(err))

            })

            //agregar tarjetas
            var tarjetas = document.getElementById('tarjetasC')

            tarjetas.addEventListener('submit', (e) => {
                e.preventDefault();

                let idUser = JSON.parse(window.sessionStorage.getItem('user')).id;
                let numCard = document.getElementById('numCard').value;
                let type = document.getElementById('type').value;
                let balance = document.getElementById('balance').value;
                let name = document.getElementById('nameCard1').value;
                let cvv = document.getElementById('cvv').value;
                let expDate = document.getElementById('expDate').value;
                let state = document.getElementsByName('status2');

                function getStateCard() {
                    return (state[0].checked ? true : false);
                }

                fetch(`${url}addCard`, {
                    method: 'POST',
                    body: JSON.stringify({
                        numCard: numCard,
                        name: name,
                        balance: balance,
                        expDate: expDate,
                        cvv: cvv,
                        state: getStateCard(),
                        type: type,
                        client: idUser
                    }),
                    headers: {
                        'Content-type': 'text/plain',
                        Accept: 'application/json'
                    }
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                        mostrarTarjetas();

                    })
                    .catch(err => console.log(err))

            })


            //agregar cuentas
            var cuentas = document.getElementById('cuentasC')
            cuentas.addEventListener('submit', (e) => {
                e.preventDefault();

                let idUser = JSON.parse(window.sessionStorage.getItem('user')).id;
                let numAccount = document.getElementById('numAccount').value;
                let type = document.getElementById('typeAccount').value;
                let state = document.getElementsByName('status1')
                let balance = document.getElementById('balanceAccount').value;

                function getStateAccount() {
                    return (state[0].checked ? true : false);
                }

                fetch(`${url}addAccount`, {
                    method: 'POST',
                    body: JSON.stringify({
                        numAccount: numAccount,
                        type: type,
                        balance: balance,
                        expDate: expDate,
                        state: getStateAccount(),
                        client: idUser
                    }),
                    headers: {
                        'Content-type': 'text/plain',
                        Accept: 'application/json'
                    }
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                        mostrarP();

                    })
                    .catch(err => console.log(err))
            })
        }
    </script>
</body>

</html>